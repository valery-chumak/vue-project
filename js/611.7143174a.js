"use strict";(self["webpackChunktest_vue_project"]=self["webpackChunktest_vue_project"]||[]).push([[611],{5314:function(t,e,a){a.d(e,{Z:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("span",{staticClass:"circle-loader"},[e("svg",{staticClass:"preloader-icon",style:t.style,attrs:{viewBox:"0 0 100 100",width:t.width,height:t.height}},[e("circle",{attrs:{cx:"50",cy:"50",r:"40","stroke-width":"5",fill:"none"}})])])},r=[],i={name:"CircleLoader",props:{width:{type:[Number,String],default:50},height:{type:[Number,String],default:50},color:{type:String,default:"#fff"}},computed:{style(){return`stroke: ${this.color};`}}},s=i,o=a(1001),l=(0,o.Z)(s,n,r,!1,null,"04ba32cc",null),c=l.exports},3392:function(t,e,a){a.d(e,{Z:function(){return u}});var n=function(){var t=this,e=t._self._c;return e("button",{class:{btn:!0,"btn--outlined":t.outlined},attrs:{type:t.type,disabled:t.loading},on:{click:function(e){return t.$emit("click")}}},[t.loading?e("CircleLoader",{staticClass:"btn__loader",attrs:{width:"38",height:"38"}}):t._e(),e("span",{staticClass:"btn_content",class:t.contentStyle},[t._t("default")],2)],1)},r=[],i=a(5314),s={name:"MainButton",components:{CircleLoader:i.Z},props:{type:{type:String,default:"button"},outlined:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},computed:{contentStyle(){return{"btn__content--hidden":this.loading}}}},o=s,l=a(1001),c=(0,l.Z)(o,n,r,!1,null,"65cb233d",null),u=c.exports},2163:function(t,e,a){a.d(e,{Z:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("section",{staticClass:"custom-section"},[t._t("default")],2)},r=[],i={name:"CustomSection"},s=i,o=a(1001),l=(0,o.Z)(s,n,r,!1,null,"2f9270ff",null),c=l.exports},7510:function(t,e,a){a.d(e,{Z:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"star-rating"},[t._l(t.starLimit,(function(t){return e("span",{key:t,staticClass:"star star--outlined"})})),e("div",{staticClass:"star-rating__colored",style:`${t.ratingWidthStyle}`},t._l(t.starLimit,(function(t){return e("span",{key:t,staticClass:"star star--colored"})})),0)],2)},r=[],i={name:"StarRating",props:{rating:{type:Number,default:0},starLimit:{type:Number,default:5}},computed:{ratingWidth(){return this.rating/this.starLimit*100},ratingWidthStyle(){return`width: ${this.ratingWidth}%;`}}},s=i,o=a(1001),l=(0,o.Z)(s,n,r,!1,null,"2ae1f149",null),c=l.exports},4611:function(t,e,a){a.r(e),a.d(e,{default:function(){return X}});var n=function(){var t=this,e=t._self._c;return e("main",{staticClass:"apartment-page"},[e("CustomSection",[e("Container",[t.isLoading?e("CircleLoader",{staticClass:"apartment-page__loader",attrs:{color:"orange",width:"98",height:"98"}}):t._e(),t.apartment&&!t.isLoading?e("div",{staticClass:"apartment-page__content"},[e("ApartmentsMainInfo",{attrs:{apartment:t.apartment}}),e("div",{staticClass:"apartment-page__additional-info"},[e("ApartmentOwner",{staticClass:"apartment-page__owner",attrs:{owner:t.apartment.owner}}),e("UserReviews",{attrs:{reviews:t.reviewsList}})],1)],1):t._e()],1)],1)],1)},r=[],i=a(3269),s=function(){var t=this,e=t._self._c;return e("article",{staticClass:"apartment-main-info"},[e("div",{staticClass:"apartment-main-info__heading"},[e("h1",{staticClass:"apartment-main-info__title"},[t._v(t._s(t.apartment.title))]),e("StarRating",{attrs:{rating:t.apartment.rating}})],1),e("img",{staticClass:"apartment-main-info__photo",attrs:{src:t.apartment.imgUrl,alt:"apartment photo"}}),e("p",{staticClass:"apartment-main-info__description"},[t._v(t._s(t.apartment.descr))]),e("div",{staticClass:"apartment-main-info__btn"},[e("Button",{attrs:{loading:t.isLoading},on:{click:t.handleApartmentsBooking}},[t._v(" Book ")])],1)])},o=[],l=a(3392),c=a(7510),u=a(8270),p={name:"ApartmentsMainInfo",components:{Button:l.Z,StarRating:c.Z},props:{apartment:{type:Object,required:!0}},data(){return{isLoading:!1}},methods:{async handleApartmentsBooking(){const t={apartmentId:this.$route.params.id,date:Date.now()};try{this.isLoading=!0,await(0,u.M)(t),this.$notify({type:"success",title:"Apartment added to bookings"})}catch(e){this.$notify({type:"error",title:"Error occured",text:e.message})}finally{this.isLoading=!1}}}},d=p,m=a(1001),_=(0,m.Z)(d,s,o,!1,null,"48bbe9a4",null),v=_.exports,h=function(){var t=this,e=t._self._c;return e("section",{staticClass:"apartments-owner"},[e("h2",{staticClass:"apartments-owner__title"},[t._v("Owner Information:")]),e("p",{staticClass:"apartments-owner__info"},[t._v(t._s(t.owner.name))]),e("p",{staticClass:"apartments-owner__tel"},[t._v(t._s(t.owner.phone))]),e("p",{staticClass:"apartments-owner__email"},[t._v(t._s(t.owner.email))])])},g=[],f={name:"ApartmentsOwner",props:{owner:{type:Object,required:!0}}},w=f,C=(0,m.Z)(w,h,g,!1,null,"39ef8800",null),y=C.exports,b=function(){var t=this,e=t._self._c;return e("section",{staticClass:"reviews"},[e("div",{staticClass:"reviews__heading"},[e("h2",{staticClass:"reviews__title"},[t._v("Summary rating")]),e("div",{staticClass:"reviews__rating"},[e("span",[t._v(t._s(t.amountOfReviews)+" review(s)")]),e("StarRating",{attrs:{rating:t.totalRating}})],1)]),t._l(t.currentReviews,(function(t){return e("ReviewsItem",{key:t.author,attrs:{review:t}})})),e("button",{staticClass:"reviews__show-more",on:{click:t.toggleReviews}},[t._v(" "+t._s(t.buttonText)+" ")])],2)},L=[],Z=function(){var t=this,e=t._self._c;return e("section",{staticClass:"reviews-item"},[e("ReviewsHeading",{attrs:{rating:t.review.rating,author:t.review.author}}),e("p",{staticClass:"reviews-item__content"},[t._v(t._s(t.review.content))])],1)},R=[],S=function(){var t=this,e=t._self._c;return e("div",{staticClass:"reviews-heading"},[e("Avatar",{staticClass:"reviews-heading__avatar"}),e("div",{staticClass:"reviews-heading__content"},[e("span",{staticClass:"reviews-heading__author"},[t._v(t._s(t.author))]),e("StarRating",{attrs:{rating:t.rating}})],1)],1)},x=[],k=function(){var t=this,e=t._self._c;return e("img",{attrs:{src:a(2971),alt:"avatar"}})},A=[],I={name:"ReviewsAvatar"},O=I,$=(0,m.Z)(O,k,A,!1,null,"22c309e6",null),B=$.exports,N={name:"ReviewsHeading",components:{StarRating:c.Z,Avatar:B},props:{author:{type:String,required:!0},rating:{type:Number,default:0}}},M=N,j=(0,m.Z)(M,S,x,!1,null,"84892afe",null),q=j.exports,U={name:"ReviewsItem",props:{review:{type:Object,required:!0}},components:{ReviewsHeading:q}},H=U,W=(0,m.Z)(H,Z,R,!1,null,"f9e37340",null),E=W.exports,T={name:"UserReviews",data(){return{reviewsLimit:2}},props:{reviews:{type:Array,required:!0}},components:{ReviewsItem:E,StarRating:c.Z},computed:{totalRating(){const t=this.reviews.reduce(((t,e)=>t+e.rating),0);return t/this.reviews.length},amountOfReviews(){return this.reviews.length},currentReviews(){return this.reviews.slice(0,this.reviewsLimit)},buttonText(){return this.reviewsLimit===this.reviews.length?"Hide":"Show more..."}},methods:{toggleReviews(){this.reviewsLimit===this.reviews.length?this.reviewsLimit=2:this.reviewsLimit=this.reviews.length}}},D=T,G=(0,m.Z)(D,b,L,!1,null,"38baf5d9",null),J=G.exports,P=JSON.parse('[{"author":"Inna","content":"Very good apartment","rating":4.5},{"author":"Yulia","content":"Recommend these aparts!","rating":5},{"author":"Illya","content":"Lovely and awesome place to stay","rating":4.7},{"author":"Lera","content":"Good","rating":3},{"author":"Alla","content":"Not bad","rating":4}]'),V=a(674),Y=a(2163),z=a(5314),F={name:"ApartmentPage",data(){return{apartment:null,isLoading:!1}},async created(){try{this.isLoading=!0;const{id:t}=this.$route.params,{data:e}=await(0,V.I)(t);this.apartment=e}catch(t){this.$notify({type:"error",title:"Error occured",text:t.message})}finally{this.isLoading=!1}},computed:{reviewsList(){return P}},components:{Container:i.Z,UserReviews:J,ApartmentsMainInfo:v,ApartmentOwner:y,CustomSection:Y.Z,CircleLoader:z.Z}},K=F,Q=(0,m.Z)(K,n,r,!1,null,"a819e118",null),X=Q.exports},674:function(t,e,a){a.d(e,{I:function(){return i},U:function(){return r}});var n=a(8042);const r=()=>n.Z.get("/apartments"),i=t=>n.Z.get(`/apartments/${t}`)},8270:function(t,e,a){a.d(e,{A:function(){return i},M:function(){return r}});var n=a(8042);const r=t=>n.Z.post("/orders",t),i=()=>n.Z.get("/orders")},2971:function(t,e,a){t.exports=a.p+"img/avatar.cc83cec5.svg"}}]);
//# sourceMappingURL=611.7143174a.js.map