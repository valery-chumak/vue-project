"use strict";(self["webpackChunktest_vue_project"]=self["webpackChunktest_vue_project"]||[]).push([[357],{5314:function(t,e,r){r.d(e,{Z:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("span",{staticClass:"circle-loader"},[e("svg",{staticClass:"preloader-icon",style:t.style,attrs:{viewBox:"0 0 100 100",width:t.width,height:t.height}},[e("circle",{attrs:{cx:"50",cy:"50",r:"40","stroke-width":"5",fill:"none"}})])])},i=[],n={name:"CircleLoader",props:{width:{type:[Number,String],default:50},height:{type:[Number,String],default:50},color:{type:String,default:"#fff"}},computed:{style(){return`stroke: ${this.color};`}}},a=n,l=r(1001),o=(0,l.Z)(a,s,i,!1,null,"04ba32cc",null),u=o.exports},3392:function(t,e,r){r.d(e,{Z:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("button",{class:{btn:!0,"btn--outlined":t.outlined},attrs:{type:t.type,disabled:t.loading},on:{click:function(e){return t.$emit("click")}}},[t.loading?e("CircleLoader",{staticClass:"btn__loader",attrs:{width:"38",height:"38"}}):t._e(),e("span",{staticClass:"btn_content",class:t.contentStyle},[t._t("default")],2)],1)},i=[],n=r(5314),a={name:"MainButton",components:{CircleLoader:n.Z},props:{type:{type:String,default:"button"},outlined:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},computed:{contentStyle(){return{"btn__content--hidden":this.loading}}}},l=a,o=r(1001),u=(0,o.Z)(l,s,i,!1,null,"65cb233d",null),c=u.exports},9865:function(t,e,r){r.d(e,{Z:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper-input"},[e("input",t._g(t._b({staticClass:"custom-input",class:!t.isValid&&"custom-input--error",domProps:{value:t.value},on:{blur:t.blurHandler}},"input",t.$attrs,!1),t.attrs)),t.isValid?t._e():e("span",{staticClass:"custom-input__error"},[t._v(t._s(t.error))])])},i=[],n={name:"CustomInput",data(){return{isValid:!0,error:"",isFirstInput:!0}},inject:{form:{default:null}},inheritAttrs:!1,props:{value:{type:String,default:""},errorMessage:{type:String,default:""},rules:{type:Array,default:()=>[]}},watch:{value(){this.isFirstInput||this.validate()}},computed:{attrs(){return{...this.$attrs,input:t=>this.$emit("input",t.target.value)}}},methods:{validate(){return this.isValid=this.rules.every((t=>{const{hasPassed:e,message:r}=t(this.value);return e?(this.error="",this.isValid=!0):this.error=r||this.errorMessage,e})),this.isValid},blurHandler(){this.isFirstInput&&this.validate(),this.isFirstInput=!1},reset(){this.isValid=!0,this.error="",this.isFirstInput=!0,this.$emit("input","")}},mounted(){this.form&&this.form.registerInput(this)},beforeUnmount(){this.form&&this.form.unRegisterInput(this)}},a=n,l=r(1001),o=(0,l.Z)(a,s,i,!1,null,"0a968788",null),u=o.exports},2163:function(t,e,r){r.d(e,{Z:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("section",{staticClass:"custom-section"},[t._t("default")],2)},i=[],n={name:"CustomSection"},a=n,l=r(1001),o=(0,l.Z)(a,s,i,!1,null,"2f9270ff",null),u=o.exports},7510:function(t,e,r){r.d(e,{Z:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"star-rating"},[t._l(t.starLimit,(function(t){return e("span",{key:t,staticClass:"star star--outlined"})})),e("div",{staticClass:"star-rating__colored",style:`${t.ratingWidthStyle}`},t._l(t.starLimit,(function(t){return e("span",{key:t,staticClass:"star star--colored"})})),0)],2)},i=[],n={name:"StarRating",props:{rating:{type:Number,default:0},starLimit:{type:Number,default:5}},computed:{ratingWidth(){return this.rating/this.starLimit*100},ratingWidthStyle(){return`width: ${this.ratingWidth}%;`}}},a=n,l=r(1001),o=(0,l.Z)(a,s,i,!1,null,"2ae1f149",null),u=o.exports},357:function(t,e,r){r.r(e),r.d(e,{default:function(){return j}});var s=function(){var t=this,e=t._self._c;return e("main",{staticClass:"homepage"},[e("CustomSection",[e("Container",[e("ApartmentsFilterForm",{staticClass:"apartments-filter",on:{submit:t.filter}})],1),e("Container",[t.isLoading?e("CircleLoader",{staticClass:"homepage__loader",attrs:{color:"orange",width:"98",height:"98"}}):t._e(),t.filteredApartments.length||t.isLoading?e("ApartmentsList",{attrs:{items:t.filteredApartments},scopedSlots:t._u([{key:"apartment",fn:function({apartment:t}){return[e("ApartmentsItem",{key:t.id,attrs:{id:t.id,descr:t.descr,rating:t.rating,imgSrc:t.imgUrl,price:t.price}})]}}])}):e("p",{staticClass:"not-found"},[t._v(" Not found :( ")])],1)],1)],1)},i=[],n=function(){var t=this,e=t._self._c;return e("ContainerVue",[e("div",{staticClass:"apartments-list"},[t._l(t.items,(function(e){return[t._t("apartment",null,{apartment:e})]}))],2)])},a=[],l=r(3269),o={name:"ApartmentsList",components:{ContainerVue:l.Z},props:{items:{type:Array,default:()=>[]}}},u=o,c=r(1001),m=(0,c.Z)(u,n,a,!1,null,"727ec3ea",null),p=m.exports,d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"apartments-item",on:{click:t.log}},[e("div",{staticClass:"apartments-item__inner"},[e("img",{staticClass:"apartments-item__photo",attrs:{src:t.imgSrc,alt:"apartment"}}),e("div",{staticClass:"apartments-item__content"},[e("p",{staticClass:"apartments-item__description"},[t._v(t._s(t.descr))]),e("div",{staticClass:"apartments-item__rating"},[e("StarRating",{attrs:{rating:t.rating}})],1),e("div",{staticClass:"apartments-item__price"},[t._v("UAH "+t._s(t.price))]),e("router-link",{staticClass:"apartments-item__link",attrs:{to:{name:"apartment",params:{id:t.id}}}})],1)])])},f=[],h=r(7510),_={name:"ApartmentsItem",components:{StarRating:h.Z},props:{id:{type:String,required:!0},descr:{type:String,default:""},rating:{type:Number,default:0},price:{type:Number,required:!0},imgSrc:{type:String,default:""}},methods:{log(){console.log("click")}}},g=_,y=(0,c.Z)(g,d,f,!1,null,"7e33b811",null),v=y.exports,C=function(){var t=this,e=t._self._c;return e("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[e("CustomSelect",{staticClass:"form__select",attrs:{items:t.cities},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}}),e("CustomInput",{attrs:{type:"number",placeholder:"Price, from","error-message":"Must not be empty",rules:t.rules},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}}),e("SubmitButton",{staticClass:"form__submit",attrs:{type:"submit"}},[t._v(" Find ")])],1)},b=[],S=r(9865),Z=function(){var t=this,e=t._self._c;return e("select",t._g({staticClass:"custom-select"},t.attrs),t._l(t.formatedItems,(function(r){return e("option",{key:r.value,domProps:{value:r.value,selected:r.selected}},[t._v(" "+t._s(r.label)+" ")])})),0)},A=[],k={name:"CustomSelect",props:{items:{type:Array,required:!0}},computed:{attrs(){return{...this.$attrs,input:t=>this.$emit("input",t.target.value)}},formatedItems(){return this.items.map((t=>"object"===typeof t?t:{value:t,label:t}))}}},L=k,x=(0,c.Z)(L,Z,A,!1,null,"a40cf1b0",null),I=x.exports,$=r(3392),w=r(4034),F={name:"FilterForm",data(){return{price:"",city:""}},components:{CustomInput:S.Z,CustomSelect:I,SubmitButton:$.Z},computed:{cities(){return[{value:"",label:"City",selected:!0},"Kyiv","Kharkiv","Odessa","Irpin","Lviv","Poltava","Rivne"]},rules(){return[w.q9,(0,w.F8)(10)]}},methods:{handleSubmit(){this.$emit("submit",{city:this.city,price:this.price})}}},P=F,B=(0,c.Z)(P,C,b,!1,null,"538cf21e",null),N=B.exports,V=r(674),q=r(2163),z=r(5314),R={name:"HomePage",data(){return{apartments:[],text:"",filters:{city:"",price:0},isLoading:!1}},async created(){try{this.isLoading=!0;const{data:t}=await(0,V.U)();this.apartments=t}catch(t){this.$notify({type:"error",title:"Error occured",text:t.message})}finally{this.isLoading=!1}},computed:{filteredApartments(){return this.filterByCityName(this.filterByPrice(this.apartments))}},components:{ApartmentsList:p,ApartmentsItem:v,ApartmentsFilterForm:N,Container:l.Z,CustomSection:q.Z,CircleLoader:z.Z},methods:{filter({city:t,price:e}){this.filters.city=t,this.filters.price=e},filterByCityName(t){return this.filters.city?t.filter((t=>t.location.city===this.filters.city)):t},filterByPrice(t){return this.filters.price?t.filter((t=>t.price>=this.filters.price)):t}}},U=R,W=(0,c.Z)(U,s,i,!1,null,"658c1dde",null),j=W.exports},674:function(t,e,r){r.d(e,{I:function(){return n},U:function(){return i}});var s=r(8042);const i=()=>s.Z.get("/apartments"),n=t=>s.Z.get(`/apartments/${t}`)},4034:function(t,e,r){r.d(e,{D6:function(){return n},F8:function(){return i},aO:function(){return a},q9:function(){return s}});const s=t=>({hasPassed:""!==t,message:"Please fill in the form"}),i=t=>e=>({hasPassed:e.length<=t,message:"You have exceeded the limit"}),n=t=>({hasPassed:/^([a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})$/.test(t),message:"Wrong email"}),a=t=>({hasPassed:/^(?=.*[A-Za-z])(?=.*[\d])[a-zA-Z0-9]{7,256}$/.test(t),message:"The password must contain one number and one symbol"})}}]);
//# sourceMappingURL=357.551f9d56.js.map